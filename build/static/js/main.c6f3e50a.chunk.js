(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{49:function(e,n,t){},50:function(e,n,t){"use strict";t.r(n);var o=t(19),c=t.n(o),r=t(9),a=t(3),u=t(2),s=t(5),l=t.n(s),i="/api/persons",d=function(e){return e.then((function(e){return e.data}))},b=function(){var e=l.a.get(i);return d(e)},j=function(e){var n=l.a.post(i,e);return d(n)},f=function(e){var n=l.a.delete("".concat(i,"/").concat(e));return d(n)},m=function(e,n){var t=l.a.put("".concat(i,"/").concat(e),n);return d(t)},h=t(0),v=function(e){var n=e.person,t=e.deletePerson;return Object(h.jsxs)("p",{children:[n.name," ",n.number," ",Object(h.jsx)("button",{onClick:function(){return t(n)},children:"delete"})]})},p=function(e){var n=e.persons,t=e.deletePerson;return n.map((function(e){return Object(h.jsx)(v,{person:e,deletePerson:t},e.name)}))},O=function(e){var n=e.query;return Object(h.jsxs)("div",{children:[n.name," ",Object(h.jsx)("input",{value:n.value,onChange:n.handler})]})},g=function(e){var n=e.message;return null===n?null:Object(h.jsx)("div",{className:"message",children:n})},x=function(e){var n=e.message;return null===n?null:Object(h.jsx)("div",{className:"error",children:n})},w=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],o=n[1],c=Object(u.useState)(""),s=Object(a.a)(c,2),l=s[0],i=s[1],d=Object(u.useState)(""),v=Object(a.a)(d,2),w=v[0],y=v[1],k=Object(u.useState)(""),S=Object(a.a)(k,2),N=S[0],C=S[1],D=Object(u.useState)(null),P=Object(a.a)(D,2),q=P[0],A=P[1],E=Object(u.useState)(null),I=Object(a.a)(E,2),J=I[0],L=I[1],T=function(){console.log("effect is being used"),b().then((function(e){console.log("persons fetched"),o(e)}))};Object(u.useEffect)(T,[]),console.log("render",t.length,"persons");var B=function(){j({name:l,number:w}).then((function(e){o(t.concat(e)),i(""),y(""),A("Added ".concat(l)),G()})).catch((function(e){console.log(e.response.data);var n=e.response.data.error;L(n),H()}))},U=function(){if(window.confirm("".concat(l," is already added to phonebook, replace the old number with a new one?"))){var e=t.find((function(e){return e.name===l}));console.log("update number of ".concat(e.id));var n=Object(r.a)(Object(r.a)({},e),{},{number:w});m(e.id,n).then((function(n){o(t.map((function(t){return t.id!==e.id?t:n}))),i(""),y(""),A("Updated ".concat(e.name,"'s number")),G()})).catch((function(e){L("Information of ".concat(l," has already been removed from the server")),H()})).then(T)}else console.log("don't update anything")},z=t.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())})),F=[{name:"name",value:l,handler:function(e){console.log(e.target.value),i(e.target.value)}},{name:"number",value:w,handler:function(e){console.log(e.target.value),y(e.target.value)}}],G=function(){setTimeout((function(){return A(null)}),3e3)},H=function(){setTimeout((function(){return L(null)}),3e3)};return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Phonebook"}),Object(h.jsx)(g,{message:q}),Object(h.jsx)(x,{message:J}),Object(h.jsxs)("form",{children:["show names with",Object(h.jsx)("input",{value:N,onChange:function(e){console.log(e.target.value),C(e.target.value)}})]}),Object(h.jsx)("h2",{children:"Add a new contact"}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log("submit clicked",e.target);var n=t.every((function(e){return l!==e.name})),o=t.every((function(e){return w!==e.number}));n&&o?B():!1===n?(console.log("Name",l,"is a duplicate"),U()):(console.log("Number",w,"is a duplicate"),window.alert("Number ".concat(w," is already added to the phonebook")))},children:[F.map((function(e){return Object(h.jsx)(O,{query:e},e.name)})),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(p,{persons:z,deletePerson:function(e){window.confirm("Delete ".concat(e.name,"?"))?(console.log("Delete person ".concat(e.id)),f(e.id).then(T),A("Deleted ".concat(e.name)),G()):console.log("Delete no one")}})]})};t(49);c.a.render(Object(h.jsx)(w,{}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.c6f3e50a.chunk.js.map